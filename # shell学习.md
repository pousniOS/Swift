# shell学习
## 文本处理工具
### 1. grep工具：
> grep是行过滤工具，根据关键字过滤  

**语法和选项**
*语法：*
```
# grep [选项] '关键字' 文件名
```
*常见选项*

```
OPTIOS:

-i//不区分大小写
-v//查找不包含指定内容的行，方向选择
-w//按单词搜索
-o//打印匹配关键字
-c//统计匹配的次数
-n//显示行号
-r//逐层遍历目录查找
-A//显示匹配行及后面多少行
-B//显示匹配行及前面多少行
-C//显示匹配行前后多少行
-l//只列出匹配的文件名
-L//列出不匹配的文件名
-e//使用正则匹配
^key//一关键字开头
key$//一关键字结尾
^$//匹配空行
--color=auto //可以将找到的关键字加上颜色的显示
```

*颜色显示设置（别名设置）：*
```
临时设置：
# alias grep = 'grep -- color=auto'//只针对当前终端和当前用户有效

永久设置：
在 /etc/bashrc 文件里添加 alias grep = 'grep --color=auto' 然后重新读取该文件用 source /etc/bashrc

```

### 2.cut工具

>cut列截取工具，用于列的截取  

**语法和选项**
*语法*
```
# cut 选项 文件名
```

*常见选项*
```
-c //以字符串为单位进行分割截取
-d //自定义分隔符，默认为制表符\t
-f //与-d一起使用，指定截取哪个区域
```

*举例说明:*
```
#cut -d: -f1 1.txt 以：冒号分割，截取第一列内容
#cut -d: -f1,6,7 1.txt 以冒号分割，截取1、6、7列内容
```

### 3. sort工具
> sort工具用于排序；它将文件的每一行作为一个单位，从首字母向后，依次按ASCII码值比较，最后将他们按升序列出   

**语法和选项**
```
-u：去掉重复行
-r：降序排列，默认是升序
-o：将排序结果输出到文件中，类似重启定向符号>
-n：以数字排序，默认是按照字符排序
-t：分隔符
-k：第N列
-b：忽略前导空格
-R：随机排序，每次运行的结果均不同
```
*举例说明*

```
sort -nr -t '\' -k2 shell_test.txt -o shell_test1.txt // 以数字的方式"\"为分割符号的第2列降序排序
```

### 4.uniq工具
> uniq用于去除连续的重复行 
```
常见选项：
-i：忽略大小写
-c：统计重复行次数
-d：只显示重复行

举例说明：
# uniq 2.txt
# uniq -d 2.txt
# uniq -dc 2.txt

```

### 5. tee工具
> tee工具是从标准输入读取并且输入到标准输出文件，即：双向覆盖重定向（屏幕输出|文件输入）  

```
选项：
-a：双向追加重定向

# echo hello world
# echo hello world|tee file1
# cat file1
# echo 999|tee -a file1
# cat file1
```
### 6. diff工具
> diff工具用于逐行比较文件的不同  

注意：diff描述两个文件的不同方式是告诉我们怎样改变第一个文件后与第二个文件匹配 

** 语法和选项 **
*语法*
```
diff [选项] 文件1 文件2
```
*常用选项*
```
-b：不检查空格
-B：不检查空白行
-i：不检查大小写
-w：忽略所有的空行
--normal：正常格式显示（默认）
-c：上下文格式显示
-u：合并格式显示
```
**比较文件夹里的文件不同**
```
# diff -q dir1 dir2 

```

**其他小技巧**

有时候我们需要以一个文件为标准去修改其他一个文件，并且修改的地方较多时，我们可以通过补丁的方式完成。

```
1. 先找出文件不同，然后输出到一个文件
# diff -uN file1 file2 > file.patch
-u：上下文模式
-N：将不存在的文件当做空文件
2. 将不同内容补丁到文件
# patch file1 file.patch
patch file file1
3. 测试验证
diff file file2

```
### 7. paste工具
> paste工具用于合并文件行  

```
常用选项：
-d：自定义间隔符，默认是tab
-s：串行处理，非并行
```

### 8. tr工具
> tr用户字符转换，替换和删除；主要用于删除文件中控制字符或进行字符转换  

**语法选项**
*语法*
```
用法1：命令的执行结果交给tr处理，其中string1用于查询，string2用于转换处理
# commands|tr ‘stirng1’ ‘string2’

用法2：tr的处理内容来自文件，记住要使用‘<’标准输入
# tr ‘string1’ ‘string2’ < fielname

用法3：匹配string1进行相应操作，如删除操作
# tr options ’string1‘ < filename
```

*常用选项：*
```
-d：删除字符串1中所有输入字符
-s：删除所有重复出现字符序列，只保留一个；即将重复出现字符串压缩为一个字符串
```

*常用匹配字符串*
```
a-z或[:lower:] 匹配所有小写字母
A-Z或[:upper:] 匹配所有大写字母
0-9或[:digit:] 匹配所有数字
[:alnum:] 匹配所有字母和数字
[:alpha:] 匹配所有字母
[:blank:] 匹配所有水平空白
[:punct:] 匹配所有标点符号
[:space:] 匹配所有水平或者垂直空格
[:cntrl:] 匹配所有控制符

```

*其他扩展*
```
# ifconfig： 获取相关配置例如ip地址
# ip a：获取相关配置例如ip地址
```

## bash的特性
### 1. 命令和文件自动补全
> tab 只能补全命令和文件（RHEL6/Centos6）

### 2. 常见快捷键
```
^c      终止前台运行的程序
^z      将前台运行的程序挂起到后台
^d      退出等价于exit
^l      清空屏幕
^a|home 光标移动到命令的最前端
^e|end  光标移动到命令行的后端
^u      删除光标前所有字符
^k      删除光标后所有字符
^r      搜索历史命令

```

### 3. 常用通配符（**重点**）
```
*                       匹配0个或者多个任意字符
?                       匹配任意单个字符
[list]                  匹配[list]中的任意单个字符,或者一组单个字符
[!list]                 匹配除[!list]中的任意单个字符
{string1,string2....}   匹配string1、string2或更多字符

```

